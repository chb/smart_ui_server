<html>
    <head>
        <link rel="stylesheet" href="../../jmvc/rhino/documentation/style.css" type="text/css" />
        <title>MVC.Model.Ajax</title>
    </head>
    <body>
        <div id='left_side'><h3>Documentation</h3>

    
        
 
            <a href='../classes/Account.html' id='Account.html'>
                Account
            </a>
       
        
    
        
 
            <a href='../classes/HealthfeedController.html' id='HealthfeedController.html'>
                HealthfeedController
            </a>
       
        
    
        
 
            <a href='../classes/MainController.html' id='MainController.html'>
                MainController
            </a>
       
        
    
        
 
            <a href='../classes/Message.html' id='Message.html'>
                Message
            </a>
       
        
    
        
 
            <a href='../classes/MessagingController.html' id='MessagingController.html'>
                MessagingController
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Class.html' id='MVC.Class.html'>
                MVC.Class
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Controller.html' id='MVC.Controller.html'>
                <span class='matches_previous'>MVC.</span>Controller
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Controller.Action.html' id='MVC.Controller.Action.html'>
                <span class='matches_previous'>MVC.Controller.</span>Action
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Controller.Action.Event.html' id='MVC.Controller.Action.Event.html'>
                <span class='matches_previous'>MVC.Controller.Action.</span>Event
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Controller.Action.Subscribe.html' id='MVC.Controller.Action.Subscribe.html'>
                <span class='matches_previous'>MVC.Controller.Action.</span>Subscribe
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Controller.Params.html' id='MVC.Controller.Params.html'>
                <span class='matches_previous'>MVC.Controller.</span>Params
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Delegator.html' id='MVC.Delegator.html'>
                <span class='matches_previous'>MVC.</span>Delegator
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Element.html' id='MVC.Element.html'>
                <span class='matches_previous'>MVC.</span>Element
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Event.html' id='MVC.Event.html'>
                <span class='matches_previous'>MVC.</span>Event
            </a>
       
        
    
        
 
            <a href='../classes/MVC.IO.html' id='MVC.IO.html'>
                <span class='matches_previous'>MVC.</span>IO
            </a>
       
        
    
        
 
            <a href='../classes/MVC.IO.Ajax.html' id='MVC.IO.Ajax.html'>
                <span class='matches_previous'>MVC.IO.</span>Ajax
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Model.html' id='MVC.Model.html'>
                <span class='matches_previous'>MVC.</span>Model
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Model.Ajax.html' id='MVC.Model.Ajax.html'>
                <span class='matches_previous'>MVC.Model.</span>Ajax
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Model.XmlRest.html' id='MVC.Model.XmlRest.html'>
                <span class='matches_previous'>MVC.Model.</span>XmlRest
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.html' id='MVC.Native.html'>
                <span class='matches_previous'>MVC.</span>Native
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.Array.html' id='MVC.Native.Array.html'>
                <span class='matches_previous'>MVC.Native.</span>Array
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.Date.html' id='MVC.Native.Date.html'>
                <span class='matches_previous'>MVC.Native.</span>Date
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.Function.html' id='MVC.Native.Function.html'>
                <span class='matches_previous'>MVC.Native.</span>Function
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.Number.html' id='MVC.Native.Number.html'>
                <span class='matches_previous'>MVC.Native.</span>Number
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.Object.html' id='MVC.Native.Object.html'>
                <span class='matches_previous'>MVC.Native.</span>Object
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Native.String.html' id='MVC.Native.String.html'>
                <span class='matches_previous'>MVC.Native.</span>String
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Store.html' id='MVC.Store.html'>
                <span class='matches_previous'>MVC.</span>Store
            </a>
       
        
    
        
 
            <a href='../classes/MVC.Vector.html' id='MVC.Vector.html'>
                <span class='matches_previous'>MVC.</span>Vector
            </a>
       
        
    
        
 
            <a href='../classes/MVC.View.html' id='MVC.View.html'>
                <span class='matches_previous'>MVC.</span>View
            </a>
       
        
    
        
 
            <a href='../classes/MVC.View.Helpers.html' id='MVC.View.Helpers.html'>
                <span class='matches_previous'>MVC.View.</span>Helpers
            </a>
       
        
    
        
 
            <a href='../classes/OpenAjax.html' id='OpenAjax.html'>
                OpenAjax
            </a>
       
        
    
        
 
            <a href='../classes/PHA.html' id='PHA.html'>
                PHA
            </a>
       
        
    
        
 
            <a href='../classes/Record.html' id='Record.html'>
                Record
            </a>
       
        
    
        
 
            <a href='../classes/RecordController.html' id='RecordController.html'>
                RecordController
            </a>
       
        
    
</div>
        <div id='right_side'><div><h1>MVC.Model.Ajax <label>API</label></h1>

<div id='shortcuts'><a href='#MVC.Model.Ajax'>MVC.Model.Ajax</a>, <a href='#MVC.Model.Ajax.static'>static</a>, <a href='#MVC.Model.Ajax.static.get_id'>get_id</a>, <a href='#MVC.Model.Ajax.static.init'>init</a>, <a href='#MVC.Model.Ajax.static.json_from_string'>json_from_string</a>, <a href='#MVC.Model.Ajax.static.request'>request</a></div>


    <div class='inherits'>Inherits: <b><a href='MVC.Model.html'>MVC.Model</a></b></div>


<div class='group'>Model.Ajax makes it easy to write models that handle the request / reponse cycle of most
 Ajax driven applications.  It helps you escape transporting callbacks.</br>
 It uses convention to tie function names to resouces/ urls.  This is best shown with an example:
 First, lets say we wanted an FTP model to be able to requests data from /ftp/dir.  We could create that
 model like this:<br/><br/><pre><code class='javascript'>Ftp = MVC.Model.Ajax.extend('ftp',
{
   dir_get_success: function(transport){
       return transport.responseText;
   }
},{})</code></pre>You could make a request to /ftp/dir like this:
<pre><code class='javascript'>callback = function(data){alert(data)};
Ftp.dir({path: "/"}, callback)</code></pre>
There are a few things to notice here.
<ul>
    <li>Ftp.dir function expects params as its first argument.  These will post path="/" to /ftp/dir</li>
    <li>There are no callbacks in the Ftp model.  You return the data you want passed to the callback in dir_get_success</li>
    <li>dir_get_success is called with the result of the transport.</li>
    <li>The get makes the request use the HTTP verb get.  You can use put/post/get/delete.  If no verb is present, it defaults 
    to post.</li>
</ul><br/><br/>Model.Ajax allows you to expand on this pattern in several ways:
<h3>Changing the request path</h3>
If /ftp/dir was actually ftp_directory, you can change the directory name by adding the following:
<pre><code class='javascript'>Ftp = MVC.Model.Ajax.extend('ftp',
{
   dir_get_url: '/ftp_directory'
   dir_get_success: function(transport){
       return transport.responseText;
   }
},{})</code></pre>dir_get_url could also be a function that dynamically returns the url.  For example,
<pre><code class='javascript'>...
   dir_get_url: function(params){
       return "/ftp/dir/"+encodeURIComponent(params.path)
   }
...</code></pre>   would return "/ftp/dir/%2F" for Ftp.dir({path: "/"}, callback)<br/><br/><h3>Customizing and validating the request</h3>
You can completely customize the request by making a function like X_request.  Where X matches one of your success functions.
The following example validates that params must include a path.
<pre><code class='javascript'>...
   dir_get_request: function(params){
       if(!params.path) throw "Path does not exist!"
   }
...</code></pre>In a request function, you can also completely customize the request with the temporary this.request function.
Example:
<pre><code class='javascript'>...
   dir_get_request: function(params){
       if(!params.path) throw "Path does not exist!"
       this.request("/ftp/dir/"+encodeURIComponent(params.path)+".json")
   }
...</code></pre>
<h3>Respond to errors</h3>
Finally, you can respond to Transport errors in the same way you respond to success:
<pre><code class='javascript'>Ftp = MVC.Model.Ajax.extend('ftp',
{
   dir_get_success: function(transport){
       return transport.responseText;
   },
   dir_get_failure: function(transport){
       return "error data"
   }
},{})</code></pre> 
</div>

<div><h2>Static Methods</h2>
<div><div class='method'>
 
 
 <h3 id="MVC.Model.Ajax.static.get_id">get_id</h3>
 <pre class='signiture'><code>get_id(transport) -> undefined</code></pre>
 <div class='real_comment'>Gets the id of a response from the responseHeader.  This is commonly used in REST
 based calls
</div>
   
      <div class='param '>
          <label>transport</label>
          <code>{Object}</code> - 
     
      </div>
 

                
</div><div class='method'>
 
 
 <h3 id="MVC.Model.Ajax.static.init">init</h3>
 <pre class='signiture'><code>init() -> undefined</code></pre>
 <div class='real_comment'>Goes through the list of static functions.  If they end with _success, creates
 a requesting function for them.
     
</div>
 

                
</div><div class='method'>
 
 
 <h3 id="MVC.Model.Ajax.static.json_from_string">json_from_string</h3>
 <pre class='signiture'><code>json_from_string(json_string) -> Object</code></pre>
 <div class='real_comment'>overwrite this function if you don't want to eval js
</div>
   
      <div class='param '>
          <label>json_string</label>
          <code>{Object}</code> - json string
      </div>
 

 
     <div class='return'>
         <label>returns</label> 
         <code>{Object}</code> - json converted to data
     
     </div>
                
</div><div class='method'>
 
 
 <h3 id="MVC.Model.Ajax.static.request">request</h3>
 <pre class='signiture'><code>request(url, request_params, options) -> undefined</code></pre>
 <div class='real_comment'> Request is only available inside generated request functions.  
 If the first argument is not a string, it assumes the first 2 arguments are
 the request params and the options.  If there are more than 3 arguments, those
 arguments
 will be used when calling back the success or failure functions.
</div>
   
      <div class='param optional'>
          <label>url</label>
          <code>{Object}</code> - 
      </div>
   
      <div class='param '>
          <label>request_params</label>
          <code>{Object}</code> - parameters passed to the request
      </div>
   
      <div class='param '>
          <label>options</label>
          <code>{Object}</code> - options sent to the transport
             
      </div>
 

                
</div></div></div>
</div></div>
        <script type="text/javascript" src="../../jmvc/rhino/documentation/highlight/highlight.js"></script>
        <script type="text/javascript">
          hljs.initHighlightingOnLoad('html', 'css','javascript');
        </script>
        <script type="text/javascript">
            //select someone
            parts = window.location.href.split("/")
            var selected = document.getElementById(parts.pop().replace(/[#|?].*/,""))
            if(selected){
                selected.className = "selected";
            }
        </script>
    </body>
</html>